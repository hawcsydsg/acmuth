<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>幻方游戏</title>
    <link rel="stylesheet" href="./css/幻方.css">
</head>

<body>
    <table id="magicSquare"></table>
    <button id="startGame">开始游戏</button>
    <button id="showHint">提示</button>
    <button id="continue">继续游戏</button>
    <script src="script.js"></script>
</body>
<script>
    document.getElementById('startGame').addEventListener('click', startGame);
    document.getElementById('continue').addEventListener('click', startGame);
    document.getElementById('showHint').addEventListener('click', showHint);

    // 生成5x5幻方
    function generateMagicSquare() {
        // 真实的应用中，你需要一个算法来随机生成幻方，在这里使用静态的数据来示例
        return [
            [17, 24, 1, 8, 15],
            [23, 5, 7, 14, 16],
            [4, 6, 13, 20, 22],
            [10, 12, 19, 21, 3],
            [11, 18, 25, 2, 9]
        ];
    }

    function startGame() {
        const square = generateMagicSquare();
        const magicSquareTable = document.getElementById('magicSquare');
        magicSquareTable.innerHTML = ''; // 清空现有内容
        square.forEach(row => {
            const tr = document.createElement('tr');
            row.forEach(value => {
                const td = document.createElement('td');
                const input = document.createElement('input');
                input.type = 'text';
                input.dataset.correctValue = value.toString();
                input.placeholder = '?';
                input.oninput = checkValue;
                if (Math.random() < 0.4) { // 随机是否展示这个数字
                    input.value = value;
                    input.readOnly = true;
                }
                td.appendChild(input);
                tr.appendChild(td);
            });
            magicSquareTable.appendChild(tr);
        });
    }

    function checkValue(event) {
        if (event.target.value == event.target.dataset.correctValue) {
            event.target.style.backgroundColor = 'lightgreen';
        } else {
            event.target.style.backgroundColor = 'salmon';
        }
    }

    function showHint() {
        const inputs = document.querySelectorAll('#magicSquare input');
        inputs.forEach(input => {
            if (!input.readOnly) {
                input.value = input.dataset.correctValue;
                input.style.backgroundColor = 'lightgreen';
            }
        });
    }

</script>

</html>